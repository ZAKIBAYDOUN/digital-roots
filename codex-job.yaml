name: ghc_streamlit_hub
version: 1.0

description: >
  Run the Green Hill Corpus Hub (Streamlit) as the persistent ingest/memory service.
  Uses Chroma PersistentClient with local on-disk store. Agent memory = gh_plan_A.

env:
  GH_PERSIST: C:\Users\zakib\OneDrive\Documentos\GitHub\digital-roots\vector_store\store_A
  GH_COLLECTION: gh_plan_A
  GH_EMBED_MODEL: sentence-transformers/all-MiniLM-L6-v2
  PORT: "8501"
  BIND: 127.0.0.1

entrypoint:
  shell: |
    $env:GH_PERSIST="{{env.GH_PERSIST}}"
    $env:GH_COLLECTION="{{env.GH_COLLECTION}}"
    $env:GH_EMBED_MODEL="{{env.GH_EMBED_MODEL}}"
    python -m streamlit run streamlit_app.py --server.address {{env.BIND}} --server.port {{env.PORT}}

persistence:
  - path: "{{env.GH_PERSIST}}"

healthcheck:
  type: http
  url: http://{{env.BIND}}:{{env.PORT}}
  interval_seconds: 10
  timeout_seconds: 5
  retries: 12

signals:
  stop: taskkill /IM python.exe /F
